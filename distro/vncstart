#!/bin/bash
: <<'BANNER'
  _________________  .____    ________     ____ _____________ ____ _________________________ ___ 
 /   _____/\_____  \ |    |   \_____  \   |    |   \______   \    |   \      \__    ___/    |   \
 \_____  \  /   |   \|    |    /   |   \  |    |   /|    |  _/    |   /   |   \|    |  |    |   /
 /        \/    |    \    |___/    |    \ |    |  / |    |   \    |  /    |    \    |  |    |  / 
/_______  /\_______  /_______ \_______  / |______/  |______  /______/\____|__  /____|  |______/  
        \/         \/       \/                   \/                \/                  
BANNER

DISPLAY_NUM=1
RESOLUTION="1280x720"
DEPTH=24

# Clean stale VNC files
rm -f ~/.vnc/*.pid
rm -f /tmp/.X${DISPLAY_NUM}-lock
rm -rf /tmp/.X11-unix/X${DISPLAY_NUM}

# Start XFCE
vncserver :$DISPLAY_NUM -geometry $RESOLUTION -depth $DEPTH

# Ensure XFCE starts
mkdir -p ~/.vnc
cat > ~/.vnc/xstartup <<EOL
#!/bin/bash
xrdb \$HOME/.Xresources
startxfce4 &
EOL
chmod +x ~/.vnc/xstartup

echo "[+] VNC started on :$DISPLAY_NUM (localhost:5901)"
